USE TOMMY;

CREATE TABLE DEPT (
DEPT_NO CHAR(8),
DEPT_NAME VARCHAR(100) NOT NULL,
DEPT_LOC VARCHAR(100) NOT NULL,
DEPT_TEL_NO VARCHAR(100) NOT NULL
);

ALTER TABLE DEPT
ADD CONSTRAINT DEPT_PK
PRIMARY KEY (DEPT_NO);

INSERT INTO DEPT VALUES(10, 'SALES', 'SEOUL', '02-671-1111');
INSERT INTO DEPT VALUES(20, 'FINANCE', 'SEOUL', '02-862-2222');
INSERT INTO DEPT VALUES(30, 'HR', 'BUSAN', '051-111-1111');
INSERT INTO DEPT VALUES(40, 'PURCHASE', 'BUSAN', '051-222-2222');
INSERT INTO DEPT VALUES(50, 'MANAGEMENT', 'SEOUL', '02-383-3333');

CREATE TABLE EMP (
EMP_NO CHAR(16),
EMP_NAME VARCHAR(100) NOT NULL,
EMP_MGE CHAR(16) NOT NULL,
HIREDATE DATE NOT NULL,
SAL INT(10) NOT NULL,
DEPT_NO CHAR(8) 
);

ALTER TABLE EMP
ADD CONSTRAINT EMP_PK
PRIMARY KEY (EMP_NO);

ALTER TABLE EMP
ADD CONSTRAINT EMP_FK
FOREIGN KEY (DEPT_NO)
REFERENCES DEPT(DEPT_NO);

INSERT INTO EMP VALUES(1001, 'KIM', 1003, '2005-01-15', 4750, 20);
INSERT INTO EMP VALUES(1002, 'LEE', 1003, '2008-06-05', 3000, 30);
INSERT INTO EMP VALUES(1003, 'PARK', 1001, '2007-11-28', 3500, 10);

UPDATE EMP SET DEPT_NO = (SELECT DEPT_NO FROM DEPT WHERE DEPT_NAME = 'MANAGEMENT') WHERE DEPT_NO = (SELECT DEPT_NO FROM DEPT WHERE DEPT_NAME = 'HR');

DELETE FROM DEPT WHERE DEPT_NO = 30;

INSERT INTO EMP VALUES(2001, 'chung', 1001, CURDATE(), 3000, 50);

SELECT * FROM EMP;